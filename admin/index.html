<!DOCTYPE html>
<html>
<head>
  <title>Admin | Create Voting Event</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
</head>
<body style="background:#0f172a; color:white; font-family:sans-serif; padding:20px;">
  <h2>Create Voting Event</h2>
  
  <input id="eventName" placeholder="Event Name" /><br><br>
  <input type="date" id="startDate" /><br><br>
  <input type="date" id="endDate" /><br><br>
  <button onclick="createEvent()">Create Event</button>

  <p id="result"></p>

  <script>
    // Your Firebase Config
    const firebaseConfig = {
  apiKey: "AIzaSyCMEyb1jdntV14bKVvoPBaApB2wi-yTz6c",
  authDomain: "jasdy-vote.firebaseapp.com",
  projectId: "jasdy-vote",
  storageBucket: "jasdy-vote.firebasestorage.app",
  messagingSenderId: "191017072761",
  appId: "1:191017072761:web:c1b0a30d75dcbc94173ca8",
  measurementId: "G-MELT3K9R0T"
};
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    function generateId(length = 6) {
      const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      let result = "";
      for (let i = 0; i < length; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return result;
    }

    async function createEvent() {
      const name = document.getElementById("eventName").value;
      const startDate = document.getElementById("startDate").value;
      const endDate = document.getElementById("endDate").value;

      if (!name || !startDate || !endDate) {
        alert("Fill in all fields");
        return;
      }

      const id = generateId();

      try {
        await db.collection("events").doc(id).set({
          id,
          name,
          startDate,
          endDate,
          createdAt: new Date().toISOString()
        });

        document.getElementById("result").innerText = `Event Created! ID: ${id}`;
      } catch (e) {
        console.error(e);
        alert("Failed to create event");
      }
    }
  </script>
</body>
</html>